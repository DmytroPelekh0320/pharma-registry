<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Графіки</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Tom Select -->
    <link href="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/css/tom-select.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/js/tom-select.complete.min.js"></script>

    <!-- Передаємо дані з Flask -->
    <script>
        window.presetForm = "{{ preset_form or '' }}";
        window.presetInn = "{{ preset_inn or '' }}";
        window.presetCountry = "{{ preset_country or '' }}";
    </script>

    <!-- Ініціалізація селекторів та автопідстановка -->
    <script src="{{ url_for('static', filename='js/chart_filters.js') }}"></script>

    <!-- Основна побудова графіка -->
    <script src="{{ url_for('static', filename='js/chart_display.js') }}"></script>

    <style>
        select {
            width: 400px;
        }
    </style>
</head>
<body>
    <h2>Графік кількості препаратів за формами випуску</h2>

    <label for="chartType">Тип графіка:</label>
    <select id="chartType">
        <option value="bar">Стовпчастий</option>
        <option value="pie">Круговий</option>
        <option value="line">Лінійний</option>
    </select>

    <br><br>
    <label for="formSelect">Оберіть форми випуску:</label><br>
    <select id="formSelect" multiple>
        {% for form in forms %}
            <option value="{{ form }}">{{ form }}</option>
        {% endfor %}
    </select>

    <br><br>
    <label for="innSelect">Оберіть МНН:</label><br>
    <select id="innSelect" multiple>
        {% for inn in inns %}
            <option value="{{ inn }}">{{ inn }}</option>
        {% endfor %}
    </select>

    <br><br>
    <label for="countrySelect">Оберіть країни виробника:</label><br>
    <select id="countrySelect" multiple>
        {% for country in countries %}
            <option value="{{ country }}">{{ country }}</option>
        {% endfor %}
    </select>

    <br><br>
    <canvas id="releaseChart" width="800" height="400"></canvas>
    <br>
    <button id="saveChartBtn">Завантажити графік (PNG)</button>

    <br><br>
    <a href="{{ url_for('index') }}"><button>Повернутися до пошуку</button></a>
</body>
</html>
